## 제품 요구사항 문서 (PRD) · Smart Calendar

### 1) 개요 ✨

- **목표**: 개인·팀 일정과 업무(Task)를 하나의 캘린더에서 직관적으로 관리하고, 카테고리/하위카테고리 기반 색상 태깅과 업무 칸반(Task Board)을 제공하는 반응형 웹앱.
- **대상 사용자**: 스타트업/중소기업 팀원, 관리자(운영자), 프리랜서/개인.
- **핵심 가치**: 일정 시각화(다중 일정 겹침 표시), 업무와 일정의 자연스러운 연결, 간편한 공유, 모바일 친화 UI.

### 2) 범위와 비범위 🎯

- **MVP 범위**
  - 구글 로그인 (Supabase Auth · Google Provider)
  - 일정 CRUD (일일/주간/월간 뷰, 같은 날 여러 일정 시간대 순서대로 표시)
  - 카테고리/하위카테고리 및 색상 설정 (관리자 전용)
  - "업무" 카테고리 일정 상세에서 칸반(Task) 보드 열기 및 Task CRUD
  - 첨부파일 업로드(이미지·문서) · Supabase Storage 사용
  - 반응형 UI (웹/모바일)
  - 기본 SEO(메타/OG, sitemap, robots)
  - 테스트: 단위(Vitest) + E2E(Playwright MCP)
- **비범위(포스트 MVP)**
  - 반복 일정(RRULE), 외부 캘린더(구글/아웃룩) 양방향 연동, 공유 링크 퍼블릭 접근, 알림/리마인더(Email/Push), 팀 조직·워크스페이스, 고급 권한.

### 3) 사용자 스토리 👥

- **일반 사용자**
  - 나는 구글로 로그인해서 나만의 일정과 업무를 관리한다.
  - 나는 같은 날짜/시간에 겹친 일정도 모두 시간순으로 한 화면에서 보고 싶다.
  - 나는 일정에 카테고리/하위카테고리를 선택하고 색으로 구분하고 싶다.
  - 나는 "업무" 일정 상세에서 칸반 보드로 Task를 만들고 드래그해 상태를 바꾸고 싶다.
  - 나는 파일(이미지/문서)을 일정에 첨부하고 싶다.
- **관리자**
  - 나는 카테고리/하위카테고리와 색상을 일괄 관리하고, 비활성화/정렬을 제어하고 싶다.

### 4) 카테고리 체계 🏷️

- **기본 카테고리(예시)**
  - 휴가: 하위(연차, 반차, 반반차, 병가, 공가)
  - 업무: 하위(일반업무, 개발, 디자인, QA, 문서, 리서치)
  - 출장: 하위(국내출장, 해외출장, 고객방문)
  - 미팅/회의: 하위(내부회의, 고객미팅, 1:1, 스탠드업)
  - 기념일: 하위(생일, 결혼기념일, 회사창립일)
  - 개인: 하위(운동, 병원, 은행, 장보기)
  - 학습/교육: 하위(세미나, 웨비나, 스터디, 자격증)
- **확장 원칙**: 관리자가 자유롭게 추가/수정/비활성화 가능. 동일 이름 방지(고유 제약).

### 5) 주요 기능 요건 ✅

- **인증**: Supabase Auth의 Google Provider 사용. 로그인 후 `profiles`에 사용자 메타 생성/동기화.
- **달력 UI**: 월/주/일 뷰, 다수 일정 겹침 시 시간대 순서로 모두 표시, 드래그&리사이즈로 일정 이동/시간 변경, 빠른 생성/수정 팝오버.
- **일정**
  - 필드: 제목, 설명, 카테고리/하위, 시작/종료, 종일, 위치, 참석자(초기 단일 소유자), 첨부, 색상(카테고리 연동), 작성자.
  - 동작: 생성/조회/수정/삭제, 드래그 이동, 복사/템플릿(포스트 MVP).
- **업무(Task) 보드**
  - 업무 카테고리 일정 상세에서 사이드패널/모달로 칸반 보드 표시.
  - 열(Column): Todo, In-Progress, Blocked, Done (재정렬 및 카드 드래그).
  - Task 필드: 제목, 설명, 담당자(선택), 마감일, 우선순위, 태그, 첨부.
- **관리자**
  - 카테고리/하위카테고리 CRUD, 컬러 선택, 노출 순서, 비활성화.
- **파일 스토리지**: Supabase Storage, 버킷 분리(`attachments`), 서명 URL로 제한적 공개.
- **권한/보안**
  - RLS 구상: 자신의 데이터만 접근, 관리자는 모든 카테고리 관리 가능. (정책 변경은 관리자 승인·코드리뷰 필수)
- **반응형**: Tailwind + ShadCN로 모바일/태블릿 최적화.
- **SEO**: App Router `metadata`, sitemap, robots, Open Graph, JSON-LD(마케팅 페이지).

### 6) 비기능 요건 🧩

- 성능: 주요 뷰 2s 내 렌더, 이미지 업로드 10MB 이내(초기), CDN 캐시.
- 가용성: Vercel(권장) 배포, Supabase SLA 준수.
- 접근성: 키보드 내비, 명도 대비 준수.
- 로깅: 서버 에러 로깅, 추적 ID, 민감정보 제외.

### 7) 성공 지표 📈

- 첫 주 가입 전환율(구글 인증 성공율) ≥ 85%
- 월간 활성 사용자(MAU) ≥ 200
- 일정 생성 성공율 ≥ 98%, 평균 생성 시간 < 2s
- E2E 테스트 통과율 ≥ 95%

### 8) 수용 기준(AC) 🧪

- [인증] 구글 로그인 성공 시 대시보드로 이동, 사용자 프로필 생성.
- [달력] 동일 시간대 다중 일정이 겹치면 모두 시각적으로 분리되어 보인다.
- [일정] 드래그로 시간 변경 후 저장 알림/토스트 노출.
- [업무] 업무 일정에서 칸반 열림, 카드 생성/이동/삭제 가능.
- [관리자] 카테고리 생성 시 색상, 정렬, 상태 필수 입력.
- [저장소] 첨부 업로드 후 미리보기/다운로드 가능(권한 준수).
- [테스트] Vitest 단위 테스트, Playwright MCP E2E 시나리오 통과.

### 9) 릴리스 계획(초기 3 스프린트) 🚀

- 스프린트 1: 프로젝트 세팅, 인증, 데이터 모델, 기본 달력 조회
- 스프린트 2: 일정 CRUD/드래그, 관리자 카테고리, 첨부 업로드
- 스프린트 3: 업무 칸반, SEO, 테스트 고도화(E2E), 안정화

### 10) 리스크와 대응 ⚠️

- Supabase RLS·Prisma 병행 시 접근 제약: 서버 전용 접근은 Prisma(Service Role), 클라이언트는 supabase-js + RLS 활용(초기엔 서버 액션 위주로 단순화).
- 모바일 드래그·리사이즈 UX: 터치 최적화 옵션/제스처 가이드 제공.
- 시간대/캘린더 국제화: `date-fns-tz`로 표준화, 사용자 타임존 저장.

### 11) 오픈 이슈 ❓

- 반복 일정(MVP 제외) 도입 시 RRULE 저장 위치와 UI 범위
- 조직/팀 개념(워크스페이스) 도입 여부 및 권한 모델 확장 시점
